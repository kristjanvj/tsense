
\chapter{Discussion}
\label{sec:discussion}

The primary goal of this project was to investigate the issues involved in securing measurement data as close to the source as possible -- at the sensor it self. One factor to consider in this respect was the feasibility of implementing a strong cryptographic primitive, fulfilling the current security demands. 
%
Early on, we decided to focus on symmetric encryption, rather than asymmetric, as this is was easily implemented, given the project time frame. Symmetric encryption is also less resource intensive, which was a bonus, since we had only a limited notion of how well the Arduino Duemilanove would be able to handle the workload we had in mind for it. Finally implementing symmetric encryption would still prove to be a useful subset of our larger goal, which is to implement a public key cryptosystem for TSense.

Our goal of producing a cross platform AES implementation, complete with a CBC-CMAC component, went smoothly, apart from a few minor easily resolved hiccups. The Arduino Duemilanove system was able to handle 128-bit AES and would probably be able to handle 256-bit AES, either off the shelf or with minor hardware enhancements, such as extra ROM space. 
%
The performance of our implementation was better than we expected and compared favorably with a the lightweight XTEA block cipher (see Table \ref{tab:aes-xtea-comparison}), which was especially pleasing since this cipher was purpose designed to be efficient and light-weight. Furthermore, AES is more complex that XTEA and our AES implementation is therefore considerably bulkier in terms of the size of code and the resultant binaries. Nevertheless our application fit easily in the 32 kilobyte program memory of the Arduino, and more importantly, did not exhaust the meager 2 kilobytes of RAM. This was especially satisfying, since our AES and CBC-CMAC implementations are not fully optimized. Further work on the AES library component would doubtless yield improvements in memory footprint and throughput. 

In summary, while we did not achieve all that we set out to do, namely the implementation of a public key based system we still feel that we managed to achieve the larger overall goal of producing an end-to-end secure sensor system, featuring encryption and security features, that live up to current demands for such systems, but still managed to do so without compromising the goal of keeping the cost of the sensor system low.

%\textbf{OPTIMIZATIONS OF CIPHER INCL TTRANSFORMS}

%\textcolor{red}{TODO: BF KVJ, Memory usage on the Arduino.} 

%\textbf{PRIMARY GOALS -- EXPLORING CRYPTO ON THE EARLIES POSSIBLE POINT -- MINIMAL SUPPORT INFRASTRUCTURE.}

%
%\section{Future work}
%

Much work remains to be done in order to produce a robust system. In particular, error handling of all components must be completely overhauled. Error messages and timeouts (soft state) must be added to the protocols to handle unexpected events and authentication denials. Future versions will also support multiple potential sinks per client/sensor pair to allow for graceful fail-overs.

%Work on protocol robustness -- current protocol has minimum error handling and such. Make system overall more resilient.

Utilizing asymmetric cryptography, at least for initial identification and session key exchange, was one of our initial goals and will be addressed in future work. This would allow private sensor keys to be truly private, that is, only reside burned onto the tamper-proof sensor device itself. All sinks can then safely hold the corresponding public keys, without sacrificing any security. This would in turn decrease the reliance on the authentication server; in fact, its role would be reduced to a fairly non-critical public key distribution service. Public key cryptographic algorithms are rather well known, but their feasibility on resource constrained hardware less so. We will consider such algorithms, in particular elliptic curve encryption and signature algorithms, in future projects.

Efficiency was not the primary focus of this project. Rather, we concentrated on developing a working prototype that satisfies rigorous security requirements. Future work includes optimizing the protocols for more resource constrained networks, e.g.\ wireless transports. One way of increasing efficiency is to decrease security, e.g.\ by using shorter encryption and MAC keys, or sacrificing encryption and solely use MACs, even truncating the MAC. A more satisfying solution is to explore efficient authenticating block or stream ciphers. One way of increasing cryptographic protocol efficiency is to use \textit{ciphertext stealing} \shortcite{schneier1996}, which removes the need for padding and the associated waste of resources. We will explore such issues in future work.

Last but not least, the current device is anything but tamper-proof, despite the fact that this is one of our most crucial requirements. We will explore the issues involved in manufacturing an actual production sized and fully tamper-proof tsensor in future projects. For the purposes of the current proof-of-concept, we believe we have shown the feasibility of the concept, but simply did not have the time or resources necessary to produce a hardened prototype.
